<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>모바일 · 수량선택</title>
  <style>
    :root{
      --brand:#ef4444;
      --line:#e9e9e9; --muted:#666; --text:#111; --card:#fff; --bg:#111;
      --app-w:420px;           /* 고정 폭 */
      --footer-h:44px;         /* 안내 높이 */
      --actions-h:62px;        /* 버튼 바 높이 */
      --safe:env(safe-area-inset-bottom, 0px);
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);font-family:system-ui,-apple-system,'Pretendard','Noto Sans KR',sans-serif;color:var(--text)}
    .app{width:var(--app-w);margin:0 auto;background:var(--card);min-height:100vh;display:grid;grid-template-rows:auto 1fr;position:relative}
    .header{background:linear-gradient(#222,#1b1b1b);color:#fff;padding:14px 16px;display:flex;gap:10px;align-items:center}
    .badge{padding:4px 8px;border-radius:999px;background:#fff;color:#111;font-weight:800;font-size:.8rem}
    .title{font-weight:800}
    .sub{margin-left:auto;opacity:.85;font-size:.9rem}
    .content{padding:12px;display:grid;gap:12px;padding-bottom:calc(var(--footer-h)+var(--actions-h)+20px+var(--safe))}
    .panel{border:1px solid var(--line);border-radius:12px;padding:12px}
    .panel h2{margin:0 0 6px;font-size:1rem}
    .hint{font-size:.82rem;color:var(--muted)}
    .row{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px dashed #eee}
    .row:last-child{border-bottom:none}
    .qty{display:flex;align-items:center;gap:10px}
    .step{width:40px;height:40px;border:1px solid var(--line);border-radius:10px;background:#f8fafc;font-size:22px;font-weight:900;cursor:pointer}
    .num{min-width:32px;text-align:center;font-weight:900;font-size:20px}
    .summary{display:grid;gap:6px}
    .summary strong{font-size:1.05rem}
    /* 하단 고정 */
    .actions{
      position:fixed;left:50%;transform:translateX(-50%);
      bottom:calc(var(--footer-h)+var(--safe));width:var(--app-w);
      display:grid;grid-template-columns:1fr 1fr;gap:10px;
      padding:12px;border-top:1px solid var(--line);background:#fff;z-index:20;
    }
    .btn{height:48px;border:none;border-radius:12px;color:#fff;font-weight:900;cursor:pointer}
    .btn.gray{background:#374151}
    .btn.red{background:var(--brand)}
    footer{
      position:fixed;left:50%;transform:translateX(-50%);bottom:0;width:var(--app-w);
      height:calc(var(--footer-h)+var(--safe));padding-bottom:var(--safe);
      display:flex;align-items:center;justify-content:center;
      background:#000;color:#ef4444;text-align:center;font-weight:700;z-index:10;padding:0 8px;
    }

    /* === 버튼 안 보일 때 응급 패치 === */
:root{
  --app-w:420px;
  --footer-h:44px;
  --safe: env(safe-area-inset-bottom, 0px);
}

/* 푸터가 더 위로 올라오지 않게 */
footer{
  position: fixed !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  bottom: 0 !important;
  width: min(var(--app-w), 100vw) !important;
  height: calc(var(--footer-h) + var(--safe)) !important;
  z-index: 998 !important;
}

/* 버튼 바를 푸터 바로 위에, 화면 폭에 맞춰 강제 표시 */
.actions, #actions, .bottom-actions{
  position: fixed !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  bottom: calc(var(--footer-h) + var(--safe)) !important;
  width: min(var(--app-w), 100vw) !important;
  display: grid !important;
  grid-template-columns: 1fr 1fr !important;
  gap: 10px !important;
  padding: 12px !important;
  background: #fff !important;
  border-top: 1px solid #e9e9e9 !important;
  z-index: 999 !important;
}

/* 본문이 버튼/푸터에 가리지 않게 하단 여백 확보 */
.content{
  padding-bottom: calc(var(--footer-h) + 62px + 24px + var(--safe)) !important;
}

/* 버튼 기본 스타일(혹시 빠졌을 때 대비) */
.btn{height:48px;border:0;border-radius:12px;color:#fff;font-weight:900;cursor:pointer}
.btn.gray{background:#374151}
.btn.red{background:#ef4444}

/* 수량 박스 (이미지 스타일) */
.qty-box{
  display: grid;
  grid-template-columns: 56px 42px;   /* 왼쪽 숫자 / 오른쪽 화살표 컬럼 */
  grid-template-rows: 1fr 1fr;        /* 위/아래 화살표 */
  grid-template-areas:
    "val up"
    "val down";
  width: 98px;
  height: 56px;
  border: 1px solid var(--line);
  border-radius: 8px;
  overflow: hidden;
  background:#fff;
}

/* 왼쪽 숫자 영역 */
.qty-box .val{
  grid-area: val;
  display:flex; align-items:center; justify-content:center;
  font-weight: 800;
  font-size: 20px;
  color: #b91c1c;            /* 붉은 수량 색 (이미지 느낌) */
  border-right: 1px solid var(--line);
}

/* 화살표 공통 */
.qty-box .arrow{
  border:0; background:#fff; cursor:pointer;
  display:flex; align-items:center; justify-content:center;
  font-size: 14px; line-height: 1;   /* 얇은 화살표 느낌 */
  color:#6b7280;                     /* 중간 회색 */
}

/* 위/아래 구분선 */
.qty-box .up{   grid-area: up;   border-bottom:1px solid var(--line); }
.qty-box .down{ grid-area: down; }

/* 터치 피드백 */
.qty-box .arrow:active{ background:#f3f4f6; }














  </style>
</head>

<header class="header">
  <div class="sub" id="subInfo"></div>
  <button onclick="location.href='index.html'" class="home-btn">
    포도알줍줍
  </button>
</header>

<style>
  .header {
    position: relative;
    background: linear-gradient(#222, #1b1b1b);
    color: #fff;
    padding: 14px 16px;
    display: flex;
    justify-content: center; /* 중앙 정렬 핵심 */
    align-items: center;
  }

  .home-btn {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    background: none;
    border: none;
    color: #fff;
    font-weight: 800;
    font-size: 1rem;
    cursor: pointer;
    letter-spacing: -0.03em;
  }
</style>

<body>
  <div class="app">
    <header class="header">
      <span class="badge">QTY</span>
      <div class="title">수량 선택</div>
      <div class="sub" id="subInfo"></div>
    </header>

    <main class="content">
      <section class="panel">
        <h2>예매 정보</h2>
        <div class="summary">
          <div>구역: <strong id="sect">-</strong></div>
          <div>선택좌석: <strong id="seats">-</strong></div>
        </div>
      </section>

      <section class="panel">
        <h2>티켓 수량</h2>
        <div class="hint">1–4매까지 선택 가능</div>

        <div class="row">
          <div>일반석</div>
          <div class="qty-box">
  <div class="val" id="num">0</div>
  <button class="arrow up" id="plus" aria-label="증가">▲</button>
  <button class="arrow down" id="minus" aria-label="감소">▼</button>
</div>

        </div>
      </section>
    </main>
  </div>

  <!-- 하단 고정 -->
  <div class="actions" id="actions">
  <button class="btn gray" id="btnBack">이전</button>
  <button class="btn red" id="btnNext">다음단계</button>
</div>
  <footer>현재 페이지는 티켓팅 연습을 위한 모의 페이지입니다. 실제와 다를 수 있습니다.</footer>

 <script>
  const p = new URLSearchParams(location.search);
  const sect = decodeURIComponent(p.get('seat') || '자동배정');
  const sel  = (p.get('sel') || '').split(',').filter(Boolean);

  document.getElementById('sect').textContent   = sect;
  document.getElementById('seats').textContent  = sel.length ? sel.join(' / ') : '(자동배정 예정)';
  document.getElementById('subInfo').textContent = sect + ' · 결제 전 단계';

  // 선택 좌석 개수(없으면 최대 4매)
  const MAX_QTY = sel.length > 0 ? sel.length : 4;

  // 수량 스텝퍼
  const numEl   = document.getElementById('num');
  const minusEl = document.getElementById('minus');
  const plusEl  = document.getElementById('plus');

  const get = () => parseInt(numEl.textContent, 10) || 0;
  const set = (v) => { numEl.textContent = String(v); };

  // 초기값 0으로 고정
  set(0);

  // 감소: 0 미만 금지
  minusEl.onclick = () => set(Math.max(0, get() - 1));

  // 증가: MAX_QTY 초과 금지
  plusEl.onclick  = () => set(Math.min(MAX_QTY, get() + 1));

  // 네비게이션
  document.getElementById('btnBack').onclick = () => history.back();

  document.getElementById('btnNext').onclick = () => {
    const qty = get();
    if (qty === 0) {
      alert('수량을 선택하세요.');
      return; // 진행 중단
    }
    // 결과 페이지로 이동 (qty 포함)
    const query = new URLSearchParams({
      seat: sect,
      sel: sel.join(','),
      qty: String(qty)
    });
    const target = 'mobile_result.html';
    if (target) location.href = `${target}?${query.toString()}`;
    else alert(`수량 ${qty}매 선택됨 (데모)`);
  };
</script>


  
</body>
</html>
